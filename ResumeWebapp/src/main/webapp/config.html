<!DOCTYPE html>
<html>
<head>
    <title>Resume Search Service Configuration</title>
    <link rel='stylesheet' href='styles/bootstrap.css'>
    <link rel='stylesheet' href='styles/custom_styles.css'>
    <link type="text/css" rel="stylesheet" href="styles/dropzone.css">

    <script type="text/javascript" src='scripts/jquery-1.10.2.js'></script>
    <script type="text/javascript" src='scripts/bootstrap.js'></script>
    <script type="text/javascript" src='scripts/bootbox.js'></script>
    <script src="scripts/dropzone.js" type="text/javascript"></script>
    <script type="text/javascript" src="scripts/namespace.js"></script>
    <script type="text/javascript" src="scripts/configScript.js"></script>
    <script type="text/javascript">
        $(function () {
            resumeReader.Configuration.loadConfigValues();
            // setting dropzone properties
            Dropzone.options.myAwesomeDropzone = {
                acceptedFiles: "application/pdf,application/msword",
                addRemoveLinks: true,
                dictInvalidFileType: "Please upload only doc, docx and pdf files",
                dictRemoveFile: "Clear file"

            };
            $("#myAwesomeDropzone").on("success", function (res) {
                /* Maybe display some more file information on your page */
                var spanAlert = $("#spanUploadResponse");
                spanAlert.html(res);
                spanAlert.removeClass("hide");
            });
        });
    </script>
</head>
<body>
<div id='body' class="well container">

    <div id="headerDiv" class="row page-header text-center">
        <h1 id="heading">Resume Search Engine Configuration</h1>
            <span class="pull-right">
                <a class="muted" href="./">Search Engine</a>
            </span>
    </div>

    <div class="row">
        <div id='configProperties' class="span6">
            <form action="javascript:resumeReader.Configuration.updateConfiguration();">
                <fieldset>
                    <legend>
                        EDIT CONFIGURATION PROPERTIES
                    </legend>
                    <label>
                        Resumes Directory :
                    </label>

                    <div class="input-prepend">
                        <button class="btn" type="button" id='btn-ResumeToggle' data-toggle="button"
                                data-target="#txtResumeList"
                                onclick="$('#txtResumeDir').toggleDisabled();"><i class="icon-edit"></i></button>
                        <input type="text" id="txtResumeDir" class="span5 inputBox"
                               placeholder="Resumes Directory" disabled>
                    </div>
                    <label>
                        Employees List File (Excel File):
                    </label>

                    <div class="input-prepend">
                        <button class="btn" type="button" id='btn-EmployeeToggle' data-toggle="button"
                                data-target="#txtEmployeeList"
                                onclick="$('#txtEmployeeList').toggleDisabled(); "><i class="icon-edit"></i></button>
                        <input type="text" id="txtEmployeeList" class="span5 inputBox"
                               placeholder="Employee List File"
                               disabled>
                    </div>
                    <span class="help-block">click on edit button to enable text box.</span>
                    <button id="btnConfigUpdate" class="btn btn-primary" type="submit" disabled>Update Changes</button>
                </fieldset>
            </form>
        </div>

        <div id="updateIndex" class="span5">
            <fieldset>
                <legend>
                    UPDATING INDEX
                </legend>
                <button id='cleanUpdateBtn' data-value="true" class="btn btn-danger" data-loading-text="updating..."
                        onclick="bootbox.prompt('Enter Security key', function(result) {
                        resumeReader.Configuration.updateIndex(event,result);
                        });">
                    CLEAN & INDEX
                </button>
                <button id='updateBtn' data-value="false" class="btn btn-primary" data-loading-text="updating..."
                        onclick="bootbox.prompt('Enter security key', function(result) {
                        resumeReader.Configuration.updateIndex(event,result);
                        });">
                    UPDATE
                </button>
            </fieldset>
        </div>
        <div id="fileUploadDiv" class="span5">
            <fieldset>
                <legend>
                    UPLOAD RESUMES
                </legend>
                <!--<form action="resumereader/upload"
                      class="dropzone"
                      id="my-awesome-dropzone"
                      enctype="multipart/form-data">
                    <div class="fallback">
                        <input name="file" type="file"/>
                    </div>
                </form>-->
                <button class="btn btn-info" onclick="$(fileUploadModal).modal('show');">Upload</button>
            </fieldset>
        </div>
    </div>


    <div id="progressBarDiv" class="progress progress-striped active hide">
        <div class="bar" id="progressBar" style="width: 0%;"></div>
    </div>

    <div id="alertBox" class="alert hide text-center">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <span id="alertText"> Here status will be shown</span>
    </div>

    <!-- Modal -->
    <div id="keyInputModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="myModalLabel">Authentication Required</h3>
        </div>
        <div class="modal-body">
            <span class="offset1">
                Security Key:
            </span>
            <input type="password" class="input-large" required="true" id='txtSecurityKey'>

            <p>
                <span class="help-block">This key is used to authenticate you as a authorized person to configure changes.
                You can find the key in <code>config.properties</code> file.
                Default key is: <code>pramati123</code></span>
            </p>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn">Close</a>
            <a href="#" class="btn btn-primary">Save changes</a>
        </div>
    </div>
    <!-- Modal -->
    <div id="fileUploadModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="uploadModalLabel">Drag Files Here to Upload</h3>
        </div>
        <div class="modal-body">
            <form action="resumereader/upload"
                  class="dropzone"
                  id="my-awesome-dropzone"
                  enctype="multipart/form-data">
                <div class="fallback">
                    <input name="file" type="file"/>
                </div>
            </form>

        </div>
        <div class="modal-footer">
            <div class="alert hide">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <span id="spanUploadResponse">Response will be shown here</span>
            </div>
            <p>
                <span class="help-block">After uploading documents, please update the index to reflect changes</span>
            </p>
        </div>
    </div>

</div>
</body>
</html>